<!DOCTYPE html>
<!--Forrás: AI-->
<html lang="hu">

<head>

  <meta charset="UTF-8">
  <title>U7W4RZ Órarend JSON - Táblázat</title>
  <style>
    * {
        box-sizing:border-box;
    }
    body {
        font-family:Segoe UI,Arial,sans-serif;
        margin:20px;background:#f5f5f5;
    }
    .container {
        max-width:900px;
        margin:auto;
    }
    h1 {
        font-size:22px;
        margin-bottom:10px;
    }
    .panel {
        background:#fff;
        border:1px solid #ccc;
        border-radius:4px;
        padding:10px 15px;
        margin-bottom:15px;
    }
    .form-row {
        margin-bottom:8px;
    }
    label {
        font-size:12px;
        font-weight:600;
        margin-right:5px;
    }
    input[type=text] {
        padding:5px 7px;
        border:1px solid #ccc;
        border-radius:3px;
        width:200px;
    }
    input[type=file] {
        font-size:12px;
    }
    button {
        padding:5px 10px;
        font-size:12px;
        border-radius:3px;
        border:1px solid #888;
        background:#eee;
        cursor:pointer;
    }
    button:hover {
        background:#ddd;
    }
    table {
        width:100%;
        border-collapse:collapse;
        background:#fff;
    }
    th,td {
        border:1px solid #ddd;
        padding:6px;
        font-size:12px;
        text-align:left;
    }
    th {
        background:#f0f0f0;
    }
    tbody tr:nth-child(even) {
        background:#fafafa;
    }
  </style>

</head>

<body>

    <div class="container">
        <h1>U7W4RZ Órarend JSON</h1>

        <div class="panel">
            <div class="form-row">
                <label>Fájl kiválasztása</label>
                <input type="file" id="file" accept=".json">
                <button id="loadFileBtn">LocalStorage betöltése</button>
                </div>
                <div class="form-row">
                <label for="search">Keresés tárgy szerint:</label>
                <input type="text" id="search" placeholder="pl. Web technológiák 1.">
            </div>
        </div>

        <table>
            <thead>
            <tr>
                <th>Tárgy</th>
                <th>Nap</th>
                <th>Tól</th>
                <th>Ig</th>
                <th>Helyszín</th>
                <th>Oktató</th>
                <th>Szak</th>
            </tr>
            </thead>
            <tbody id="tbody"></tbody>
        </table>
    </div>

    <script>
        const DB_KEY = 'neptunkod_orarend_db';
        const $ = id => document.getElementById(id);
        var lessons = JSON.parse(localStorage.getItem(DB_KEY) || '[]');

        const saveStore = () =>
            localStorage.setItem(DB_KEY, JSON.stringify(lessons));

        const renderTable = () => {
            const term = $('search').value.toLowerCase();
            var data = lessons;
            if (term) data = data.filter(o => o.targy.toLowerCase().includes(term));
            const rows = data.map(o => `
            <tr>
                <td>${o.targy}</td>
                <td>${o.idopont.nap}</td>
                <td>${o.idopont.tol}</td>
                <td>${o.idopont.ig}</td>
                <td>${o.helyszin}</td>
                <td>${o.oktato}</td>
                <td>${o.szak}</td>
            </tr>`).join('');
            $('tbody').innerHTML = rows || '<tr><td colspan="7">Nincs megjeleníthető adat.</td></tr>';
        };

        $('search').oninput = renderTable;

        $('loadFileBtn').onclick = () => {
            lessons = JSON.parse(localStorage.getItem(DB_KEY) || '[]');
            renderTable();
        };

        $('file').addEventListener('change', e => {
            const file = e.target.files[0];
            if (!file) return;
            const r = new FileReader();
            r.onload = ev => {
            try{
                const data = JSON.parse(ev.target.result);          
                const ora = data.XY_Orarend?.ora;                   
                if (!Array.isArray(ora)) throw new Error();
                lessons = ora;
                saveStore();
                renderTable();
            }catch{
                alert('Hibás JSON fájl!');
            }
            };
            r.readAsText(file);
        });

        renderTable();
    </script>

</body>

</html>
